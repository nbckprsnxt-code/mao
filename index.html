<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸€å£å…¥é­‚æ±‰å ¡åº—</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Comic Sans MS", "Microsoft YaHei", sans-serif;
        }

        body {
            background-color: #fffbf5;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect width="200" height="200" fill="%23fffbf5"/><path d="M0 0L200 200M200 0L0 200" stroke="%23f5e8d0" stroke-width="1" stroke-opacity="0.2"/></svg>');
            padding: 20px;
            min-height: 100vh;
            background-attachment: fixed;
        }

        .game-title {
            text-align: center;
            color: #d17b49;
            font-size: 40px;
            margin: 20px 0 30px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.1);
            letter-spacing: 2px;
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
        }

        .game-title::after {
            content: '';
            display: block;
            width: 80%;
            height: 4px;
            background: linear-gradient(90deg, transparent, #e8a87c, #d17b49, transparent);
            margin: 10px auto 0;
            border-radius: 2px;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 320px 1fr 280px;
            gap: 30px;
        }

        .card {
            background-color: #ffffff;
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
            border: 3px solid #f8e9d1;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease;
        }

        .card:hover {
            transform: translateY(-3px);
        }

        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, #e8a87c, #f9e6d2, #e8a87c);
            opacity: 0.8;
        }

        .order-area {
            text-align: center;
        }

        .order-area h3 {
            color: #d17b49;
            font-size: 22px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .customer-card {
            background-color: #fff8ed;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #f5e0b8;
            transition: all 0.3s ease;
        }

        .customer-card-happy {
            background-color: #f0f8f2;
            border-color: #c8e6c9;
        }
        
        .customer-card-satisfied {
            background-color: #fff8ed;
            border-color: #f5e0b8;
        }
        
        .customer-card-normal {
            background-color: #fffbf0;
            border-color: #ffe898;
        }
        
        .customer-card-unhappy {
            background-color: #fff0f0;
            border-color: #f5c6c6;
        }
        
        .customer-card-angry {
            background-color: #fee9e9;
            border-color: #f0b3b3;
        }

        .customer-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-color: #f8d698;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            border: 4px solid #ffffff;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }

        .customer {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
            color: #d17b49;
            animation: pulse 2s infinite ease-in-out;
        }

        /* ç‰¹æ®Šè¦æ±‚æ ‡ç­¾ */
        .special-request {
            display: inline-block;
            padding: 5px 12px;
            background-color: #7986cb;
            color: white;
            border-radius: 20px;
            font-size: 14px;
            margin: 8px 0;
            animation: pulse 1.5s infinite;
        }

        .mood-container {
            margin: 10px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .mood-emoji {
            font-size: 28px;
            margin-bottom: 5px;
            transition: all 0.3s ease;
        }
        
        .mood-text {
            font-size: 16px;
            font-weight: bold;
            padding: 4px 12px;
            border-radius: 20px;
            color: white;
            transition: all 0.3s ease;
        }
        
        .mood-text-happy {
            background-color: #66bb6a;
        }
        
        .mood-text-satisfied {
            background-color: #9ccc65;
        }
        
        .mood-text-normal {
            background-color: #ffca28;
        }
        
        .mood-text-unhappy {
            background-color: #ffa726;
        }
        
        .mood-text-angry {
            background-color: #ef5350;
        }
        
        .mood-change {
            font-size: 14px;
            color: #777;
            margin-top: 8px;
            font-style: italic;
            animation: fadeInOut 3s ease;
        }

        .timer-container {
            margin: 15px 0;
        }

        .timer-label {
            font-size: 16px;
            color: #888;
            margin-bottom: 5px;
            text-align: left;
        }

        .timer-bar {
            height: 12px;
            background-color: #faf6ed;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 8px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }

        .timer-progress {
            height: 100%;
            background: linear-gradient(90deg, #81c784, #43a047, #2e7d32);
            border-radius: 6px;
            transition: width 1s linear;
            width: 100%;
        }

        .timer {
            font-size: 18px;
            color: #e57373;
            font-weight: bold;
            text-align: center;
        }

        /* éš¾åº¦æŒ‡ç¤ºå™¨ */
        .difficulty-indicator {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 10px 0;
        }
        
        .difficulty-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #ddd;
        }
        
        .difficulty-dot.active {
            background-color: #ef5350;
            animation: pulse 1s infinite;
        }

        .target-burger {
            background-color: #fef9f0;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            min-height: 220px;
            border: 2px dashed #f0d0a0;
            position: relative;
        }

        .target-burger::before {
            content: 'ç›®æ ‡æ±‰å ¡';
            position: absolute;
            top: -12px;
            left: 20px;
            background-color: #ffffff;
            padding: 0 12px;
            font-size: 14px;
            color: #d17b49;
            font-weight: bold;
            border-radius: 8px;
        }

        .make-area {
            display: flex;
            flex-direction: column;
        }

        .make-area h3 {
            color: #43a047;
            font-size: 22px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .ingredients {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            padding: 20px;
            background-color: #fef9f0;
            border-radius: 15px;
            border: 2px dashed #f0d0a0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50"><rect width="50" height="50" fill="transparent"/><path d="M0 25L50 25M25 0L25 50" stroke="%23f0d0a0" stroke-width="0.5" stroke-opacity="0.2"/></svg>');
        }

        .ingredient {
            padding: 12px 20px;
            background-color: #66bb6a;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }

        /* é”å®šçš„é£Ÿææ ·å¼ */
        .ingredient.locked {
            background-color: #ccc;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .ingredient.locked:hover {
            background-color: #ccc;
            transform: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }
        
        .ingredient.locked::after {
            content: 'ğŸ”’';
            margin-left: 5px;
            font-size: 12px;
        }

        .ingredient:hover {
            background-color: #43a047;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .ingredient:active {
            transform: translateY(-1px);
        }

        .ingredient::before {
            content: 'ğŸ”';
            font-size: 18px;
        }

        .ingredient[data-type="é¢åŒ…åº•"]::before { content: 'ğŸ'; background-color: #f5e0b8; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="ç‰›è‚‰é¥¼"]::before { content: 'ğŸ¥©'; background-color: #b98860; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="ç”Ÿèœ"]::before { content: 'ğŸ¥¬'; background-color: #81c784; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="ç•ªèŒ„"]::before { content: 'ğŸ…'; background-color: #ef6c6c; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="èŠå£«"]::before { content: 'ğŸ§€'; background-color: #ffe082; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="æ´‹è‘±"]::before { content: 'ğŸ§…'; background-color: #a880c8; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="é…¸é»„ç“œ"]::before { content: 'ğŸ¥’'; background-color: #81c784; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="é¢åŒ…é¡¶"]::before { content: 'ğŸ'; background-color: #f5e0b8; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="åŸ¹æ ¹"]::before { content: 'ğŸ¥“'; background-color: #d17b49; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="é¸¡è›‹"]::before { content: 'ğŸ¥š'; background-color: #fff3e0; border-radius: 50%; padding: 2px; }
        .ingredient[data-type="è¾£æ¤’"]::before { content: 'ğŸŒ¶ï¸'; background-color: #ef5350; border-radius: 50%; padding: 2px; }

        .current-burger {
            background-color: #fef9f0;
            padding: 20px;
            border-radius: 15px;
            min-height: 220px;
            margin-bottom: 25px;
            border: 2px dashed #f0d0a0;
            position: relative;
        }

        .current-burger::before {
            content: 'æˆ‘çš„æ±‰å ¡';
            position: absolute;
            top: -12px;
            left: 20px;
            background-color: #ffffff;
            padding: 0 12px;
            font-size: 14px;
            color: #43a047;
            font-weight: bold;
            border-radius: 8px;
        }

        .burger-stack {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: auto;
        }

        .serve-btn, .reset-btn, .undo-btn, .hint-btn {
            padding: 14px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.2s ease;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }

        .serve-btn {
            background-color: #43a047;
            color: white;
        }

        .serve-btn:hover {
            background-color: #2e7d32;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .reset-btn {
            background-color: #ffca28;
            color: #4a4a4a;
        }

        .reset-btn:hover {
            background-color: #ffb300;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .undo-btn {
            background-color: #d17b49;
            color: white;
        }

        .undo-btn:hover {
            background-color: #b05c2e;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .hint-btn {
            background-color: #7986cb;
            color: white;
        }

        .hint-btn:hover {
            background-color: #5c6bc0;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .score-area {
            text-align: center;
        }

        .score-area h3 {
            color: #e57373;
            font-size: 22px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .level-badge {
            background: linear-gradient(135deg, #e8a87c, #d17b49);
            color: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            margin: 0 auto 15px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
            border: 4px solid #ffffff;
        }

        .level {
            font-size: 20px;
            color: #43a047;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score {
            font-size: 56px;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.08);
            animation: bounce 0.5s ease;
            background: linear-gradient(135deg, #d17b49, #e8a87c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .feedback {
            font-size: 18px;
            color: #4a4a4a;
            min-height: 50px;
            margin: 20px 0;
            padding: 18px;
            border-radius: 15px;
            background-color: #fafafa;
            border: 2px solid #eeeeee;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* æˆå°±ç³»ç»Ÿæ ·å¼ */
        .achievements-container {
            margin: 20px 0;
            text-align: left;
            padding: 15px;
            background-color: #faf6ed;
            border-radius: 12px;
            border: 1px solid #f0d0a0;
            max-height: 180px;
            overflow-y: auto;
        }
        
        .achievement-title {
            font-size: 16px;
            font-weight: bold;
            color: #d17b49;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .achievement-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 6px 0;
            padding: 6px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }
        
        .achievement-item.unlocked {
            background-color: #f0f8f2;
            border-left: 3px solid #43a047;
        }
        
        .achievement-item.locked {
            opacity: 0.6;
        }
        
        .achievement-icon {
            font-size: 18px;
            width: 30px;
            text-align: center;
        }
        
        .achievement-info {
            flex: 1;
        }
        
        .achievement-name {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        
        .achievement-desc {
            font-size: 12px;
            color: #777;
        }

        .stats-container {
            margin: 20px 0;
            text-align: left;
            padding: 15px;
            background-color: #faf6ed;
            border-radius: 12px;
            border: 1px solid #f0d0a0;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 15px;
        }

        .stat-label {
            color: #777;
        }

        .stat-value {
            font-weight: bold;
            color: #d17b49;
        }

        .ingredient-item {
            padding: 10px 15px;
            margin: 6px 0;
            background-color: #fff;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: fadeIn 0.3s ease forwards;
            width: 100%;
            border-left: 4px solid #43a047;
        }

        .ingredient-item-bread-bottom { border-left-color: #ffca28; }
        .ingredient-item-patty { border-left-color: #b98860; }
        .ingredient-item-lettuce { border-left-color: #43a047; }
        .ingredient-item-tomato { border-left-color: #ef5350; }
        .ingredient-item-cheese { border-left-color: #ffe082; }
        .ingredient-item-onion { border-left-color: #9575cd; }
        .ingredient-item-pickle { border-left-color: #66bb6a; }
        .ingredient-item-bread-top { border-left-color: #ffca28; }
        .ingredient-item-bacon { border-left-color: #d17b49; }
        .ingredient-item-egg { border-left-color: #fff3e0; }
        .ingredient-item-chili { border-left-color: #ef5350; }

        .burger-layer {
            width: 180px;
            height: 25px;
            margin: 2px 0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            animation: slideUp 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.15);
        }

        .layer-bread-bottom {
            background-color: #f5e0b8;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            height: 35px;
            border: 2px solid #ffca28;
            color: #8b5a2b;
        }

        .layer-patty {
            background-color: #b98860;
            height: 30px;
            border: 2px solid #8b5a2b;
        }

        .layer-lettuce {
            background-color: #81c784;
            border: 2px solid #43a047;
        }

        .layer-tomato {
            background-color: #ef6c6c;
            border: 2px solid #ef5350;
        }

        .layer-cheese {
            background-color: #ffe082;
            border: 2px solid #ffca28;
            color: #8b5a2b;
        }

        .layer-onion {
            background-color: #a880c8;
            border: 2px solid #9575cd;
        }

        .layer-pickle {
            background-color: #81c784;
            border: 2px solid #43a047;
            color: #1e6f5c;
        }

        .layer-bread-top {
            background-color: #f5e0b8;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            height: 35px;
            border: 2px solid #ffca28;
            color: #8b5a2b;
        }
        
        .layer-bacon {
            background-color: #d17b49;
            border: 2px solid #b05c2e;
        }
        
        .layer-egg {
            background-color: #fff3e0;
            border: 2px solid #ffcc80;
            color: #8b5a2b;
        }
        
        .layer-chili {
            background-color: #ef5350;
            border: 2px solid #d32f2f;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes bounce {
            0% { transform: scale(0.95); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }

        @keyframes hintPulse {
            0% { box-shadow: 0 0 0 0 rgba(121, 134, 203, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(121, 134, 203, 0); }
            100% { box-shadow: 0 0 0 0 rgba(121, 134, 203, 0); }
        }

        /* å‡çº§æç¤ºå¼¹çª— */
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
            animation: bounce 0.5s ease;
            border: 4px solid #d17b49;
        }
        
        .popup h2 {
            color: #d17b49;
            margin-bottom: 15px;
            font-size: 28px;
        }
        
        .popup p {
            margin-bottom: 20px;
            font-size: 18px;
            color: #555;
        }
        
        .popup button {
            padding: 10px 25px;
            background-color: #43a047;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .popup button:hover {
            background-color: #2e7d32;
            transform: translateY(-2px);
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
        }

        @media (max-width: 900px) {
            .game-container {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .btn-group {
                flex-wrap: wrap;
            }
            
            .btn-group button {
                flex: 1 1 45%;
            }

            .game-title {
                font-size: 32px;
            }
        }

        @media (max-width: 500px) {
            .burger-layer {
                width: 140px;
            }
            
            .ingredients {
                justify-content: center;
            }
            
            .ingredient {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .btn-group button {
                flex: 1 1 100%;
            }
        }
    </style>
</head>
<body>
    <h1 class="game-title">ğŸ” ä¸€å£å…¥é­‚æ±‰å ¡åº— ğŸ”</h1>
    
    <div class="game-container">
        <!-- è®¢å•åŒºåŸŸ -->
        <div class="order-area card">
            <h3>ğŸ§‘â€ğŸ³ é¡¾å®¢è®¢å•</h3>
            
            <div class="customer-card" id="customerCard">
                <div class="customer-avatar" id="customerAvatar">ğŸ‘¨</div>
                <div class="customer" id="customer">è€ç‹</div>
                <!-- ç‰¹æ®Šè¦æ±‚æ˜¾ç¤º -->
                <div id="specialRequest" class="special-request" style="display: block;">ä¸è¦æ´‹è‘±</div>
                <!-- éš¾åº¦æŒ‡ç¤ºå™¨ -->
                <div class="difficulty-indicator" id="difficultyIndicator">
                    <div class="difficulty-dot active"></div>
                    <div class="difficulty-dot active"></div>
                    <div class="difficulty-dot"></div>
                </div>
                <!-- å¿ƒæƒ…çŠ¶æ€æ˜¾ç¤º -->
                <div class="mood-container">
                    <div class="mood-emoji" id="moodEmoji">ğŸ˜Š</div>
                    <div class="mood-text mood-text-happy" id="moodText">å¼€å¿ƒ</div>
                    <div class="mood-change" id="moodChange"></div>
                </div>
            </div>
            
            <div class="timer-container">
                <div class="timer-label">åˆ¶ä½œæ—¶é—´</div>
                <div class="timer-bar">
                    <div class="timer-progress" id="timerProgress"></div>
                </div>
                <div class="timer" id="timer">å‰©ä½™æ—¶é—´: 30s</div>
            </div>
            
            <div class="target-burger" id="targetBurger">
                <div class="burger-stack" id="targetBurgerStack">
                    <!-- åŠ¨æ€ç”Ÿæˆç›®æ ‡æ±‰å ¡å±‚ -->
                    <div class="burger-layer layer-bread-top">é¢åŒ…é¡¶</div>
                    <div class="burger-layer layer-cheese">èŠå£«</div>
                    <div class="burger-layer layer-tomato">ç•ªèŒ„</div>
                    <div class="burger-layer layer-lettuce">ç”Ÿèœ</div>
                    <div class="burger-layer layer-patty">ç‰›è‚‰é¥¼</div>
                    <div class="burger-layer layer-bread-bottom">é¢åŒ…åº•</div>
                </div>
            </div>
        </div>

        <!-- åˆ¶ä½œåŒºåŸŸ -->
        <div class="make-area card">
            <h3>ğŸ› ï¸ åˆ¶ä½œæ±‰å ¡</h3>
            
            <div class="ingredients">
                <button class="ingredient" data-type="é¢åŒ…åº•">é¢åŒ…åº•</button>
                <button class="ingredient" data-type="ç‰›è‚‰é¥¼">ç‰›è‚‰é¥¼</button>
                <button class="ingredient" data-type="ç”Ÿèœ">ç”Ÿèœ</button>
                <button class="ingredient" data-type="ç•ªèŒ„">ç•ªèŒ„</button>
                <button class="ingredient" data-type="èŠå£«">èŠå£«</button>
                <button class="ingredient" data-type="æ´‹è‘±">æ´‹è‘±</button>
                <button class="ingredient" data-type="é…¸é»„ç“œ">é…¸é»„ç“œ</button>
                <button class="ingredient" data-type="é¢åŒ…é¡¶">é¢åŒ…é¡¶</button>
                <button class="ingredient locked" data-type="åŸ¹æ ¹" id="baconBtn">åŸ¹æ ¹</button>
                <button class="ingredient locked" data-type="é¸¡è›‹" id="eggBtn">é¸¡è›‹</button>
                <button class="ingredient locked" data-type="è¾£æ¤’" id="chiliBtn">è¾£æ¤’</button>
            </div>
            
            <div class="current-burger" id="currentBurger">
                <div class="burger-stack" id="currentBurgerStack">
                    <div style="color: #999; font-size: 16px; margin-top: 50px;">ç‚¹å‡»ä¸Šæ–¹é£Ÿæå¼€å§‹åˆ¶ä½œæ±‰å ¡...</div>
                </div>
            </div>
            
            <!-- åŠŸèƒ½æŒ‰é’®åŒº - ç§»é™¤äº†éŸ³æ•ˆæŒ‰é’® -->
            <div class="btn-group">
                <button class="hint-btn" id="hintBtn">ğŸ’¡ æç¤º</button>
                <button class="undo-btn" id="undoBtn">â†©ï¸ æ’¤é”€</button>
                <button class="reset-btn" id="resetBtn">ğŸ”„ é‡ç½®</button>
                <button class="serve-btn" id="serveBtn">âœ… é€å‡º</button>
            </div>
        </div>

        <!-- è¯„åˆ†åŒºåŸŸ -->
        <div class="score-area card">
            <h3>ğŸ† æ¸¸æˆç»Ÿè®¡</h3>
            
            <div class="level-badge" id="levelBadge">1</div>
            <div class="level" id="level">ç­‰çº§: 1</div>
            
            <div class="score" id="score">0</div>
            
            <!-- æˆå°±ç³»ç»Ÿ -->
            <div class="achievements-container">
                <div class="achievement-title">ğŸ† æˆå°±ç³»ç»Ÿ</div>
                <div class="achievement-item locked" id="achievement1">
                    <div class="achievement-icon">ğŸ”’</div>
                    <div class="achievement-info">
                        <div class="achievement-name">æ±‰å ¡æ–°æ‰‹</div>
                        <div class="achievement-desc">å®Œæˆç¬¬ä¸€ä¸ªæ±‰å ¡è®¢å•</div>
                    </div>
                </div>
                <div class="achievement-item locked" id="achievement2">
                    <div class="achievement-icon">ğŸ”’</div>
                    <div class="achievement-info">
                        <div class="achievement-name">è¿ç»­å‘½ä¸­</div>
                        <div class="achievement-desc">è¿ç»­5æ¬¡åˆ¶ä½œæ­£ç¡®çš„æ±‰å ¡</div>
                    </div>
                </div>
                <div class="achievement-item locked" id="achievement3">
                    <div class="achievement-icon">ğŸ”’</div>
                    <div class="achievement-info">
                        <div class="achievement-name">å‡çº§è¾¾äºº</div>
                        <div class="achievement-desc">å‡çº§åˆ°5çº§</div>
                    </div>
                </div>
                <div class="achievement-item locked" id="achievement4">
                    <div class="achievement-icon">ğŸ”’</div>
                    <div class="achievement-info">
                        <div class="achievement-name">æ»¡åˆ†ç™¾æ¬¡</div>
                        <div class="achievement-desc">ç´¯è®¡å®Œæˆ100åˆ†çš„è®¢å•</div>
                    </div>
                </div>
                <div class="achievement-item locked" id="achievement5">
                    <div class="achievement-icon">ğŸ”’</div>
                    <div class="achievement-info">
                        <div class="achievement-name">è§£é”å¤§å¸ˆ</div>
                        <div class="achievement-desc">è§£é”æ‰€æœ‰é£Ÿæ</div>
                    </div>
                </div>
            </div>
            
            <!-- æ¸¸æˆç»Ÿè®¡ä¿¡æ¯ -->
            <div class="stats-container">
                <div class="stat-item">
                    <span class="stat-label">å®Œæˆè®¢å•æ•°:</span>
                    <span class="stat-value" id="completedOrders">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">æ­£ç¡®ç‡:</span>
                    <span class="stat-value" id="accuracyRate">0%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">è¿ç»­æ­£ç¡®:</span>
                    <span class="stat-value" id="streakCount">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å‰©ä½™æç¤ºæ¬¡æ•°:</span>
                    <span class="stat-value" id="hintCount">3</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">è§£é”é£Ÿæ:</span>
                    <span class="stat-value" id="unlockedIngredients">8/11</span>
                </div>
            </div>
            
            <div class="feedback" id="feedback">
                æ¬¢è¿æ¥åˆ°ä¸€å£å…¥é­‚æ±‰å ¡åº—ï¼
            </div>
            
            <div>
                <button class="reset-btn" style="margin-top: 20px; padding: 12px 30px;" id="restartBtn">ğŸ”„ é‡æ–°å¼€å§‹</button>
            </div>
        </div>
    </div>

    <!-- å‡çº§å¼¹çª— -->
    <div class="overlay" id="levelUpOverlay" style="display: none;"></div>
    <div class="popup" id="levelUpPopup" style="display: none;">
        <h2>ğŸŠ æ­å–œå‡çº§ï¼</h2>
        <p id="levelUpMessage">ä½ å·²å‡çº§åˆ°2çº§ï¼Œè§£é”äº†æ–°é£Ÿæï¼</p>
        <button id="popupCloseBtn">ç»§ç»­æ¸¸æˆ</button>
    </div>

    <script>
        // æ¸¸æˆé…ç½®
        const GAME_CONFIG = {
            baseTime: 30,       // åŸºç¡€æ—¶é—´ï¼ˆç§’ï¼‰
            levelUpScore: 500,  // å‡çº§æ‰€éœ€åˆ†æ•°
            correctScore: 100,  // æ­£ç¡®å¾—åˆ†
            wrongScore: -50,    // é”™è¯¯æ‰£åˆ†
            timePenalty: -30,   // è¶…æ—¶æ‰£åˆ†
            // å¿ƒæƒ…ç³»ç»Ÿé…ç½®
            moodCheckInterval: 5, // å¿ƒæƒ…æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
            moodDecrement: 1,     // æ¯æ¬¡æ£€æŸ¥å¿ƒæƒ…ä¸‹é™å€¼
            wrongMoodPenalty: 2,  // åˆ¶ä½œé”™è¯¯å¿ƒæƒ…æƒ©ç½šå€¼
            timeOutMoodPenalty: 5, // è¶…æ—¶å¿ƒæƒ…æƒ©ç½šå€¼
            // æ–°å¢é…ç½®
            initialHintCount: 3,   // åˆå§‹æç¤ºæ¬¡æ•°
            streakBonus: 20,       // è¿ç»­æ­£ç¡®å¥–åŠ±åˆ†æ•°
            maxStreakBonus: 50,    // æœ€å¤§è¿ç»­å¥–åŠ±
            // éš¾åº¦ç³»ç»Ÿé…ç½®
            difficultyLevels: 3,   // éš¾åº¦ç­‰çº§æ•°é‡
            specialRequestChance: 0.3, // ç‰¹æ®Šè¦æ±‚å‡ºç°æ¦‚ç‡
            // é£Ÿæè§£é”é…ç½®
            unlockLevels: {
                "åŸ¹æ ¹": 3,
                "é¸¡è›‹": 5,
                "è¾£æ¤’": 7
            }
        };

        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            score: 0,
            level: 1,
            completedOrders: 0,
            correctOrders: 0,
            streakCount: 0,
            hintCount: GAME_CONFIG.initialHintCount,
            unlockedIngredients: 8,
            currentBurger: [],
            targetBurger: ['é¢åŒ…åº•', 'ç‰›è‚‰é¥¼', 'ç”Ÿèœ', 'ç•ªèŒ„', 'èŠå£«', 'é¢åŒ…é¡¶'],
            timeRemaining: GAME_CONFIG.baseTime,
            timerInterval: null,
            moodLevel: 4, // 4=å¼€å¿ƒ, 3=æ»¡æ„, 2=ä¸€èˆ¬, 1=ä¸å¼€å¿ƒ, 0=æ„¤æ€’
            currentCustomer: {
                name: 'è€ç‹',
                avatar: 'ğŸ‘¨',
                specialRequest: 'ä¸è¦æ´‹è‘±',
                difficulty: 2
            }
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // è®¾ç½®é¡¾å®¢ä¿¡æ¯
            document.getElementById('customerAvatar').textContent = gameState.currentCustomer.avatar;
            document.getElementById('customer').textContent = gameState.currentCustomer.name;
            
            // è®¾ç½®ç‰¹æ®Šè¦æ±‚
            const specialRequestEl = document.getElementById('specialRequest');
            if (gameState.currentCustomer.specialRequest) {
                specialRequestEl.textContent = gameState.currentCustomer.specialRequest;
                specialRequestEl.style.display = 'block';
            }
            
            // è®¾ç½®éš¾åº¦æŒ‡ç¤ºå™¨
            const difficultyDots = document.querySelectorAll('.difficulty-dot');
            difficultyDots.forEach((dot, index) => {
                if (index < gameState.currentCustomer.difficulty) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // åˆå§‹åŒ–è®¡æ—¶å™¨
            updateTimer();
            startTimer();
            
            // ç»‘å®šé£Ÿæç‚¹å‡»äº‹ä»¶
            bindIngredientEvents();
            
            // ç»‘å®šåŠŸèƒ½æŒ‰é’®äº‹ä»¶
            bindButtonEvents();
        }

        // ç»‘å®šé£Ÿæç‚¹å‡»äº‹ä»¶
        function bindIngredientEvents() {
            const ingredientButtons = document.querySelectorAll('.ingredient:not(.locked)');
            ingredientButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const ingredient = this.getAttribute('data-type');
                    addIngredientToBurger(ingredient);
                });
            });
        }

        // ç»‘å®šåŠŸèƒ½æŒ‰é’®äº‹ä»¶
        function bindButtonEvents() {
            // æç¤ºæŒ‰é’®
            document.getElementById('hintBtn').addEventListener('click', showHint);
            
            // æ’¤é”€æŒ‰é’®
            document.getElementById('undoBtn').addEventListener('click', undoLastIngredient);
            
            // é‡ç½®æŒ‰é’®
            document.getElementById('resetBtn').addEventListener('click', resetBurger);
            
            // é€å‡ºæŒ‰é’®
            document.getElementById('serveBtn').addEventListener('click', serveBurger);
            
            // é‡æ–°å¼€å§‹æŒ‰é’®
            document.getElementById('restartBtn').addEventListener('click', restartGame);
            
            // å¼¹çª—å…³é—­æŒ‰é’®
            document.getElementById('popupCloseBtn').addEventListener('click', closeLevelUpPopup);
        }

        // æ·»åŠ é£Ÿæåˆ°æ±‰å ¡
        function addIngredientToBurger(ingredient) {
            gameState.currentBurger.push(ingredient);
            updateCurrentBurgerDisplay();
        }

        // æ›´æ–°å½“å‰æ±‰å ¡æ˜¾ç¤º
        function updateCurrentBurgerDisplay() {
            const currentBurgerStack = document.getElementById('currentBurgerStack');
            
            // æ¸…ç©ºå½“å‰æ˜¾ç¤º
            currentBurgerStack.innerHTML = '';
            
            // å¦‚æœæ±‰å ¡ä¸ºç©ºï¼Œæ˜¾ç¤ºæç¤ºæ–‡å­—
            if (gameState.currentBurger.length === 0) {
                currentBurgerStack.innerHTML = '<div style="color: #999; font-size: 16px; margin-top: 50px;">ç‚¹å‡»ä¸Šæ–¹é£Ÿæå¼€å§‹åˆ¶ä½œæ±‰å ¡...</div>';
                return;
            }
            
            // é€†åºæ˜¾ç¤ºï¼ˆé¢åŒ…åº•åœ¨æœ€ä¸‹é¢ï¼‰
            const reversedBurger = [...gameState.currentBurger].reverse();
            
            // æ·»åŠ æ±‰å ¡å±‚
            reversedBurger.forEach(ingredient => {
                const layerClass = getLayerClass(ingredient);
                const layerEl = document.createElement('div');
                layerEl.className = `burger-layer ${layerClass}`;
                layerEl.textContent = ingredient;
                currentBurgerStack.appendChild(layerEl);
            });
        }

        // è·å–é£Ÿæå¯¹åº”çš„æ ·å¼ç±»
        function getLayerClass(ingredient) {
            switch(ingredient) {
                case 'é¢åŒ…åº•': return 'layer-bread-bottom';
                case 'ç‰›è‚‰é¥¼': return 'layer-patty';
                case 'ç”Ÿèœ': return 'layer-lettuce';
                case 'ç•ªèŒ„': return 'layer-tomato';
                case 'èŠå£«': return 'layer-cheese';
                case 'æ´‹è‘±': return 'layer-onion';
                case 'é…¸é»„ç“œ': return 'layer-pickle';
                case 'é¢åŒ…é¡¶': return 'layer-bread-top';
                case 'åŸ¹æ ¹': return 'layer-bacon';
                case 'é¸¡è›‹': return 'layer-egg';
                case 'è¾£æ¤’': return 'layer-chili';
                default: return '';
            }
        }

        // æ’¤é”€ä¸Šä¸€æ­¥
        function undoLastIngredient() {
            if (gameState.currentBurger.length > 0) {
                gameState.currentBurger.pop();
                updateCurrentBurgerDisplay();
                showFeedback('å·²æ’¤é”€ä¸Šä¸€æ­¥æ“ä½œ');
            } else {
                showFeedback('æ²¡æœ‰å¯æ’¤é”€çš„æ“ä½œï¼');
            }
        }

        // é‡ç½®æ±‰å ¡
        function resetBurger() {
            gameState.currentBurger = [];
            updateCurrentBurgerDisplay();
            showFeedback('å·²é‡ç½®æ±‰å ¡åˆ¶ä½œ');
        }

        // æ˜¾ç¤ºæç¤º
        function showHint() {
            if (gameState.hintCount <= 0) {
                showFeedback('æç¤ºæ¬¡æ•°å·²ç”¨å®Œï¼');
                return;
            }
            
            gameState.hintCount--;
            document.getElementById('hintCount').textContent = gameState.hintCount;
            
            // æ‰¾åˆ°ä¸‹ä¸€ä¸ªéœ€è¦æ·»åŠ çš„é£Ÿæ
            let nextIngredient = '';
            for (let i = 0; i < gameState.targetBurger.length; i++) {
                if (i >= gameState.currentBurger.length || gameState.currentBurger[i] !== gameState.targetBurger[i]) {
                    nextIngredient = gameState.targetBurger[i];
                    break;
                }
            }
            
            if (nextIngredient) {
                showFeedback(`æç¤ºï¼šä¸‹ä¸€æ­¥éœ€è¦æ·»åŠ ${nextIngredient}`);
                
                // é«˜äº®æç¤ºå¯¹åº”çš„é£ŸææŒ‰é’®
                const hintButton = document.querySelector(`.ingredient[data-type="${nextIngredient}"]`);
                if (hintButton) {
                    hintButton.style.animation = 'hintPulse 1.5s infinite';
                    setTimeout(() => {
                        hintButton.style.animation = '';
                    }, 3000);
                }
            } else {
                showFeedback('æç¤ºï¼šä½ çš„æ±‰å ¡å·²ç»åˆ¶ä½œå®Œæˆï¼Œå¯ä»¥é€å‡ºäº†ï¼');
            }
        }

        // é€å‡ºæ±‰å ¡
        function serveBurger() {
            // åœæ­¢è®¡æ—¶å™¨
            clearInterval(gameState.timerInterval);
            
            // æ£€æŸ¥æ±‰å ¡æ˜¯å¦æ­£ç¡®
            const isCorrect = checkBurger();
            
            if (isCorrect) {
                // æ­£ç¡®
                gameState.correctOrders++;
                gameState.streakCount++;
                gameState.score += GAME_CONFIG.correctScore;
                
                // æ·»åŠ è¿ç»­å¥–åŠ±
                const streakBonus = Math.min(gameState.streakCount * GAME_CONFIG.streakBonus, GAME_CONFIG.maxStreakBonus);
                if (streakBonus > 0) {
                    gameState.score += streakBonus;
                    showFeedback(`å¤ªæ£’äº†ï¼æ±‰å ¡åˆ¶ä½œæ­£ç¡®ï¼+${GAME_CONFIG.correctScore}åˆ†ï¼Œè¿ç»­å¥–åŠ±+${streakBonus}åˆ†`);
                } else {
                    showFeedback(`å¤ªæ£’äº†ï¼æ±‰å ¡åˆ¶ä½œæ­£ç¡®ï¼+${GAME_CONFIG.correctScore}åˆ†`);
                }
                
                // æå‡å¿ƒæƒ…
                improveMood();
            } else {
                // é”™è¯¯
                gameState.score += GAME_CONFIG.wrongScore;
                gameState.streakCount = 0;
                showFeedback(`å“å‘€ï¼æ±‰å ¡åˆ¶ä½œé”™è¯¯ï¼${GAME_CONFIG.wrongScore}åˆ†`);
                
                // é™ä½å¿ƒæƒ…
                worsenMood(GAME_CONFIG.wrongMoodPenalty);
            }
            
            // æ›´æ–°ç»Ÿè®¡
            gameState.completedOrders++;
            updateStats();
            
            // æ£€æŸ¥å‡çº§
            checkLevelUp();
            
            // è§£é”æˆå°±
            checkAchievements();
            
            // å‡†å¤‡ä¸‹ä¸€ä¸ªè®¢å•
            setTimeout(() => {
                nextOrder();
            }, 2000);
        }

        // æ£€æŸ¥æ±‰å ¡æ˜¯å¦æ­£ç¡®
        function checkBurger() {
            // æ£€æŸ¥é•¿åº¦æ˜¯å¦ä¸€è‡´
            if (gameState.currentBurger.length !== gameState.targetBurger.length) {
                return false;
            }
            
            // æ£€æŸ¥æ¯ä¸€å±‚æ˜¯å¦ä¸€è‡´
            for (let i = 0; i < gameState.currentBurger.length; i++) {
                if (gameState.currentBurger[i] !== gameState.targetBurger[i]) {
                    return false;
                }
            }
            
            // æ£€æŸ¥ç‰¹æ®Šè¦æ±‚
            if (gameState.currentCustomer.specialRequest === 'ä¸è¦æ´‹è‘±' && 
                gameState.currentBurger.includes('æ´‹è‘±')) {
                return false;
            }
            
            return true;
        }

        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimer() {
            document.getElementById('timer').textContent = `å‰©ä½™æ—¶é—´: ${gameState.timeRemaining}s`;
            
            // æ›´æ–°è¿›åº¦æ¡
            const progressPercent = (gameState.timeRemaining / GAME_CONFIG.baseTime) * 100;
            document.getElementById('timerProgress').style.width = `${progressPercent}%`;
            
            // æ”¹å˜è¿›åº¦æ¡é¢œè‰²
            if (progressPercent < 30) {
                document.getElementById('timerProgress').style.background = 'linear-gradient(90deg, #ef5350, #e57373, #ef5350)';
            } else if (progressPercent < 60) {
                document.getElementById('timerProgress').style.background = 'linear-gradient(90deg, #ffca28, #ffb74d, #ffca28)';
            }
        }

        // å¼€å§‹è®¡æ—¶å™¨
        function startTimer() {
            gameState.timerInterval = setInterval(() => {
                gameState.timeRemaining--;
                updateTimer();
                
                // æ£€æŸ¥å¿ƒæƒ…ï¼ˆæ¯éš”æŒ‡å®šæ—¶é—´ï¼‰
                if (gameState.timeRemaining % GAME_CONFIG.moodCheckInterval === 0) {
                    worsenMood(GAME_CONFIG.moodDecrement);
                }
                
                // æ—¶é—´åˆ°
                if (gameState.timeRemaining <= 0) {
                    clearInterval(gameState.timerInterval);
                    gameState.score += GAME_CONFIG.timePenalty;
                    gameState.streakCount = 0;
                    showFeedback(`æ—¶é—´åˆ°ï¼${GAME_CONFIG.timePenalty}åˆ†`);
                    worsenMood(GAME_CONFIG.timeOutMoodPenalty);
                    
                    // æ›´æ–°ç»Ÿè®¡
                    gameState.completedOrders++;
                    updateStats();
                    
                    // å‡†å¤‡ä¸‹ä¸€ä¸ªè®¢å•
                    setTimeout(() => {
                        nextOrder();
                    }, 2000);
                }
            }, 1000);
        }

        // æ”¹å–„å¿ƒæƒ…
        function improveMood() {
            gameState.moodLevel = Math.min(4, gameState.moodLevel + 1);
            updateMoodDisplay();
            document.getElementById('moodChange').textContent = 'å¿ƒæƒ…å˜å¥½äº†ğŸ˜Š';
        }

        // æ¶åŒ–å¿ƒæƒ…
        function worsenMood(penalty = 1) {
            gameState.moodLevel = Math.max(0, gameState.moodLevel - penalty);
            updateMoodDisplay();
            document.getElementById('moodChange').textContent = 'å¿ƒæƒ…å˜å·®äº†ğŸ˜';
        }

        // æ›´æ–°å¿ƒæƒ…æ˜¾ç¤º
        function updateMoodDisplay() {
            const moodEmoji = document.getElementById('moodEmoji');
            const moodText = document.getElementById('moodText');
            const customerCard = document.getElementById('customerCard');
            
            // ç§»é™¤æ‰€æœ‰å¿ƒæƒ…ç±»
            customerCard.classList.remove('customer-card-happy', 'customer-card-satisfied', 
                                         'customer-card-normal', 'customer-card-unhappy', 'customer-card-angry');
            
            // ç§»é™¤æ‰€æœ‰å¿ƒæƒ…æ–‡æœ¬ç±»
            moodText.classList.remove('mood-text-happy', 'mood-text-satisfied', 
                                     'mood-text-normal', 'mood-text-unhappy', 'mood-text-angry');
            
            // æ ¹æ®å¿ƒæƒ…ç­‰çº§è®¾ç½®æ ·å¼
            switch(gameState.moodLevel) {
                case 4: // å¼€å¿ƒ
                    moodEmoji.textContent = 'ğŸ˜Š';
                    moodText.textContent = 'å¼€å¿ƒ';
                    moodText.classList.add('mood-text-happy');
                    customerCard.classList.add('customer-card-happy');
                    break;
                case 3: // æ»¡æ„
                    moodEmoji.textContent = 'ğŸ™‚';
                    moodText.textContent = 'æ»¡æ„';
                    moodText.classList.add('mood-text-satisfied');
                    customerCard.classList.add('customer-card-satisfied');
                    break;
                case 2: // ä¸€èˆ¬
                    moodEmoji.textContent = 'ğŸ˜';
                    moodText.textContent = 'ä¸€èˆ¬';
                    moodText.classList.add('mood-text-normal');
                    customerCard.classList.add('customer-card-normal');
                    break;
                case 1: // ä¸å¼€å¿ƒ
                    moodEmoji.textContent = 'ğŸ˜';
                    moodText.textContent = 'ä¸å¼€å¿ƒ';
                    moodText.classList.add('mood-text-unhappy');
                    customerCard.classList.add('customer-card-unhappy');
                    break;
                case 0: // æ„¤æ€’
                    moodEmoji.textContent = 'ğŸ˜ ';
                    moodText.textContent = 'æ„¤æ€’';
                    moodText.classList.add('mood-text-angry');
                    customerCard.classList.add('customer-card-angry');
                    break;
            }
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('level').textContent = `ç­‰çº§: ${gameState.level}`;
            document.getElementById('levelBadge').textContent = gameState.level;
            document.getElementById('completedOrders').textContent = gameState.completedOrders;
            document.getElementById('streakCount').textContent = gameState.streakCount;
            
            // è®¡ç®—æ­£ç¡®ç‡
            const accuracy = gameState.completedOrders > 0 
                ? Math.round((gameState.correctOrders / gameState.completedOrders) * 100) 
                : 0;
            document.getElementById('accuracyRate').textContent = `${accuracy}%`;
            
            // æ›´æ–°è§£é”é£Ÿææ•°
            document.getElementById('unlockedIngredients').textContent = `${gameState.unlockedIngredients}/11`;
        }

        // æ˜¾ç¤ºåé¦ˆä¿¡æ¯
        function showFeedback(message) {
            const feedbackEl = document.getElementById('feedback');
            feedbackEl.textContent = message;
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            feedbackEl.style.animation = 'bounce 0.5s ease';
            setTimeout(() => {
                feedbackEl.style.animation = '';
            }, 500);
        }

        // æ£€æŸ¥å‡çº§
        function checkLevelUp() {
            const requiredScore = gameState.level * GAME_CONFIG.levelUpScore;
            if (gameState.score >= requiredScore) {
                gameState.level++;
                showLevelUpPopup();
                
                // æ£€æŸ¥æ˜¯å¦è§£é”æ–°é£Ÿæ
                checkIngredientUnlock();
            }
        }

        // æ˜¾ç¤ºå‡çº§å¼¹çª—
        function showLevelUpPopup() {
            document.getElementById('levelUpMessage').textContent = `ä½ å·²å‡çº§åˆ°${gameState.level}çº§ï¼`;
            document.getElementById('levelUpOverlay').style.display = 'block';
            document.getElementById('levelUpPopup').style.display = 'block';
            
            // æ›´æ–°ç­‰çº§æ˜¾ç¤º
            updateStats();
        }

        // å…³é—­å‡çº§å¼¹çª—
        function closeLevelUpPopup() {
            document.getElementById('levelUpOverlay').style.display = 'none';
            document.getElementById('levelUpPopup').style.display = 'none';
            showFeedback(`æ­å–œå‡çº§åˆ°${gameState.level}çº§ï¼`);
        }

        // æ£€æŸ¥é£Ÿæè§£é”
        function checkIngredientUnlock() {
            // è§£é”åŸ¹æ ¹ï¼ˆ3çº§ï¼‰
            if (gameState.level >= GAME_CONFIG.unlockLevels.åŸ¹æ ¹ && 
                document.getElementById('baconBtn').classList.contains('locked')) {
                document.getElementById('baconBtn').classList.remove('locked');
                gameState.unlockedIngredients++;
                showFeedback('è§£é”æ–°é£Ÿæï¼šåŸ¹æ ¹ï¼');
            }
            
            // è§£é”é¸¡è›‹ï¼ˆ5çº§ï¼‰
            if (gameState.level >= GAME_CONFIG.unlockLevels.é¸¡è›‹ && 
                document.getElementById('eggBtn').classList.contains('locked')) {
                document.getElementById('eggBtn').classList.remove('locked');
                gameState.unlockedIngredients++;
                showFeedback('è§£é”æ–°é£Ÿæï¼šé¸¡è›‹ï¼');
            }
            
            // è§£é”è¾£æ¤’ï¼ˆ7çº§ï¼‰
            if (gameState.level >= GAME_CONFIG.unlockLevels.è¾£æ¤’ && 
                document.getElementById('chiliBtn').classList.contains('locked')) {
                document.getElementById('chiliBtn').classList.remove('locked');
                gameState.unlockedIngredients++;
                showFeedback('è§£é”æ–°é£Ÿæï¼šè¾£æ¤’ï¼');
            }
            
            // æ›´æ–°ç»‘å®šäº‹ä»¶ï¼ˆæ–°è§£é”çš„é£Ÿæï¼‰
            bindIngredientEvents();
        }

        // æ£€æŸ¥æˆå°±è§£é”
        function checkAchievements() {
            // æ±‰å ¡æ–°æ‰‹ï¼šå®Œæˆç¬¬ä¸€ä¸ªè®¢å•
            if (gameState.completedOrders >= 1) {
                unlockAchievement('achievement1', 'ğŸ†');
            }
            
            // è¿ç»­å‘½ä¸­ï¼šè¿ç»­5æ¬¡æ­£ç¡®
            if (gameState.streakCount >= 5) {
                unlockAchievement('achievement2', 'ğŸ”¥');
            }
            
            // å‡çº§è¾¾äººï¼šå‡çº§åˆ°5çº§
            if (gameState.level >= 5) {
                unlockAchievement('achievement3', 'â­');
            }
            
            // æ»¡åˆ†ç™¾æ¬¡ï¼šç´¯è®¡100åˆ†
            if (gameState.score >= 100) {
                unlockAchievement('achievement4', 'ğŸ’¯');
            }
            
            // è§£é”å¤§å¸ˆï¼šè§£é”æ‰€æœ‰é£Ÿæ
            if (gameState.unlockedIngredients >= 11) {
                unlockAchievement('achievement5', 'ğŸ”“');
            }
        }

        // è§£é”æˆå°±
        function unlockAchievement(achievementId, icon) {
            const achievement = document.getElementById(achievementId);
            if (achievement.classList.contains('locked')) {
                achievement.classList.remove('locked');
                achievement.classList.add('unlocked');
                achievement.querySelector('.achievement-icon').textContent = icon;
                showFeedback(`è§£é”æˆå°±ï¼š${achievement.querySelector('.achievement-name').textContent}`);
            }
        }

        // ä¸‹ä¸€ä¸ªè®¢å•
        function nextOrder() {
            // é‡ç½®æ±‰å ¡
            gameState.currentBurger = [];
            updateCurrentBurgerDisplay();
            
            // é‡ç½®è®¡æ—¶å™¨
            gameState.timeRemaining = GAME_CONFIG.baseTime;
            updateTimer();
            startTimer();
            
            // é‡ç½®å¿ƒæƒ…
            gameState.moodLevel = 4;
            updateMoodDisplay();
            
            // éšæœºç”Ÿæˆæ–°é¡¾å®¢ï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…å¯ä»¥éšæœºä¸åŒé¡¾å®¢ï¼‰
            const customers = [
                { name: 'è€ç‹', avatar: 'ğŸ‘¨', specialRequest: 'ä¸è¦æ´‹è‘±', difficulty: 2 },
                { name: 'å°çº¢', avatar: 'ğŸ‘©', specialRequest: '', difficulty: 1 },
                { name: 'å°æ', avatar: 'ğŸ§‘', specialRequest: 'å¤šåŠ èŠå£«', difficulty: 3 }
            ];
            
            // éšæœºé€‰æ‹©é¡¾å®¢
            const randomIndex = Math.floor(Math.random() * customers.length);
            gameState.currentCustomer = customers[randomIndex];
            
            // æ›´æ–°é¡¾å®¢æ˜¾ç¤º
            document.getElementById('customerAvatar').textContent = gameState.currentCustomer.avatar;
            document.getElementById('customer').textContent = gameState.currentCustomer.name;
            
            // æ›´æ–°ç‰¹æ®Šè¦æ±‚
            const specialRequestEl = document.getElementById('specialRequest');
            if (gameState.currentCustomer.specialRequest) {
                specialRequestEl.textContent = gameState.currentCustomer.specialRequest;
                specialRequestEl.style.display = 'block';
            } else {
                specialRequestEl.style.display = 'none';
            }
            
            // æ›´æ–°éš¾åº¦æŒ‡ç¤ºå™¨
            const difficultyDots = document.querySelectorAll('.difficulty-dot');
            difficultyDots.forEach((dot, index) => {
                if (index < gameState.currentCustomer.difficulty) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // ç”Ÿæˆæ–°çš„ç›®æ ‡æ±‰å ¡
            generateTargetBurger();
            
            showFeedback('æ–°çš„è®¢å•æ¥äº†ï¼');
        }

        // ç”Ÿæˆç›®æ ‡æ±‰å ¡
        function generateTargetBurger() {
            // æ ¹æ®éš¾åº¦ç”Ÿæˆä¸åŒå¤æ‚åº¦çš„æ±‰å ¡
            const baseIngredients = ['é¢åŒ…åº•', 'ç‰›è‚‰é¥¼', 'é¢åŒ…é¡¶'];
            const extraIngredients = ['ç”Ÿèœ', 'ç•ªèŒ„', 'èŠå£«', 'æ´‹è‘±', 'é…¸é»„ç“œ'];
            
            // åŸºç¡€æ±‰å ¡
            gameState.targetBurger = [...baseIngredients];
            
            // æ ¹æ®éš¾åº¦æ·»åŠ é¢å¤–é£Ÿæ
            const difficulty = gameState.currentCustomer.difficulty;
            const extraCount = difficulty; // éš¾åº¦1åŠ 1ä¸ªï¼Œéš¾åº¦2åŠ 2ä¸ªï¼Œéš¾åº¦3åŠ 3ä¸ª
            
            // éšæœºæ·»åŠ é¢å¤–é£Ÿæ
            for (let i = 0; i < extraCount; i++) {
                const randomIndex = Math.floor(Math.random() * extraIngredients.length);
                const randomIngredient = extraIngredients[randomIndex];
                
                // æ’å…¥åˆ°ç‰›è‚‰é¥¼å’Œé¢åŒ…é¡¶ä¹‹é—´
                gameState.targetBurger.splice(-1, 0, randomIngredient);
                
                // å¦‚æœæœ‰ç‰¹æ®Šè¦æ±‚ï¼Œç§»é™¤å¯¹åº”çš„é£Ÿæ
                if (gameState.currentCustomer.specialRequest === 'ä¸è¦æ´‹è‘±') {
                    gameState.targetBurger = gameState.targetBurger.filter(ing => ing !== 'æ´‹è‘±');
                }
            }
            
            // æ›´æ–°ç›®æ ‡æ±‰å ¡æ˜¾ç¤º
            updateTargetBurgerDisplay();
        }

        // æ›´æ–°ç›®æ ‡æ±‰å ¡æ˜¾ç¤º
        function updateTargetBurgerDisplay() {
            const targetBurgerStack = document.getElementById('targetBurgerStack');
            
            // æ¸…ç©ºå½“å‰æ˜¾ç¤º
            targetBurgerStack.innerHTML = '';
            
            // é€†åºæ˜¾ç¤ºï¼ˆé¢åŒ…åº•åœ¨æœ€ä¸‹é¢ï¼‰
            const reversedBurger = [...gameState.targetBurger].reverse();
            
            // æ·»åŠ æ±‰å ¡å±‚
            reversedBurger.forEach(ingredient => {
                const layerClass = getLayerClass(ingredient);
                const layerEl = document.createElement('div');
                layerEl.className = `burger-layer ${layerClass}`;
                layerEl.textContent = ingredient;
                targetBurgerStack.appendChild(layerEl);
            });
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState = {
                score: 0,
                level: 1,
                completedOrders: 0,
                correctOrders: 0,
                streakCount: 0,
                hintCount: GAME_CONFIG.initialHintCount,
                unlockedIngredients: 8,
                currentBurger: [],
                targetBurger: ['é¢åŒ…åº•', 'ç‰›è‚‰é¥¼', 'ç”Ÿèœ', 'ç•ªèŒ„', 'èŠå£«', 'é¢åŒ…é¡¶'],
                timeRemaining: GAME_CONFIG.baseTime,
                timerInterval: null,
                moodLevel: 4,
                currentCustomer: {
                    name: 'è€ç‹',
                    avatar: 'ğŸ‘¨',
                    specialRequest: 'ä¸è¦æ´‹è‘±',
                    difficulty: 2
                }
            };
            
            // é‡ç½®é£Ÿæé”å®šçŠ¶æ€
            document.getElementById('baconBtn').classList.add('locked');
            document.getElementById('eggBtn').classList.add('locked');
            document.getElementById('chiliBtn').classList.add('locked');
            
            // é‡ç½®æˆå°±
            document.querySelectorAll('.achievement-item').forEach(item => {
                item.classList.remove('unlocked');
                item.classList.add('locked');
                item.querySelector('.achievement-icon').textContent = 'ğŸ”’';
            });
            
            // é‡æ–°åˆå§‹åŒ–
            initGame();
            updateStats();
            updateCurrentBurgerDisplay();
            updateTargetBurgerDisplay();
            showFeedback('æ¸¸æˆå·²é‡æ–°å¼€å§‹ï¼');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ¸¸æˆ
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
